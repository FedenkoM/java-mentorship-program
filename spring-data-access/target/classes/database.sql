CREATE DOMAIN category AS varchar(10) CHECK(VALUE IN('STANDART','PREMIUM', 'BAR'));

CREATE TABLE IF NOT EXISTS event (
 id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 title varchar(128) NOT NULL,
 date timestamp NOT NULL,
 ticketPrice numeric(10,2) NOT NULL
 );

CREATE TABLE IF NOT EXISTS "user" (
 id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 name varchar(45) NOT NULL,
 email varchar(45) NOT NULL UNIQUE
 );

CREATE TABLE IF NOT EXISTS ticket (
 id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 eventId bigint NOT NULL,
 userId bigint NOT NULL,
 category category NOT NULL,
 place int NOT NULL,
 CONSTRAINT fk_user FOREIGN KEY (userId) REFERENCES "user"(id) );

CREATE TABLE IF NOT EXISTS user_account (
 id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 userId bigint NOT NULL,
 balance numeric(10,2) NOT NULL,
 CONSTRAINT fk_user_account_user FOREIGN KEY (userId) REFERENCES "user"(id) .
 );